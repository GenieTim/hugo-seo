{{ $scratch := .scratch }}

{{ with .parent }}
  {{/* .Permalink, .Title, .Parent are from the "parent" context 
    (generated by Hugo, not the params partial) */}}
  {{ partial "hugo-seo/private/utils/breadcrumb-recursive" (dict "scratch" $scratch "parent" .Parent) }}
  {{ $title := .Params.seo.title | default .Title }}
  {{- $scratch.Add  "itemList" (slice (dict 
    "@type" "ListItem"
    "item" .Permalink 
    "name" $title
    "position" ($scratch.Get "itemCount")
  )) -}}
  {{ $scratch.Add "itemCount" 1 }}
{{ end }}
