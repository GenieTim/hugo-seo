{{ $s := newScratch }}
{{ $s.Set "article" dict }}


{{ $s.SetInMap "article" "@context"  "https://schema.org" }}
{{ $s.SetInMap "article" "@type"  .jsonldType }}
{{ $s.SetInMap "article" "url" .canonical }}
{{ $s.SetInMap "article" "headline" .title }}
{{ $s.SetInMap "article" "description" .description }}
{{ $s.SetInMap "article" "articleBody" .articleBody }}

{{ with .image }}
{{ $s.SetInMap "article" "image" . }}
{{ end }}

{{ with .page.WordCount }}
  {{ $s.SetInMap "article" "wordcount" . }}
{{ end }}

{{ with .datePublished }}
  {{ $s.SetInMap "article" "datePublished" . }}
{{ end }}

{{ with .dateModified }}
  {{ $s.SetInMap "article" "dateModified" . }}
{{ end }}

{{ with .authors }}
  {{ $authors := slice }}
  {{ range . }}
    {{ $author := (dict "@type" "Person") }}
    {{ range $key, $value := . }}
      {{ if or (eq $key "name") (eq $key "url") }}
      {{ $author = merge $author (dict $key $value) }}
      {{ end }}
    {{ end }}
    {{ $authors = $authors | append $author }}
  {{ end }}
  {{ $s.SetInMap "article" "authors" $authors }}
{{ end }}


{{ return $s.Get "article"  }}
