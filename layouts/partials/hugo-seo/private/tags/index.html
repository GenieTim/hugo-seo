{{ $s := newScratch }}
{{ $s.Set "tags" dict }}

{{ if eq site.Params.seo.generate.title true }}
  {{ $s.SetInMap "tags" "title" .title_tag }}
{{ end }}

{{/* set meta tags for standard meta, og, twitter */}}
{{ $s.Set "meta" slice }}

{{ if eq (.page.Param "seo.generate.meta") true }}
  {{ $s.Add "meta" (partial "hugo-seo/private/tags/meta" . ) }}
{{ end }}

{{ if eq (.page.Param "seo.generate.og") true }}
  {{ $s.Add "meta" (partial "hugo-seo/private/tags/og" . )  }}
{{ end }}

{{ if eq (.page.Param "seo.generate.twitter") true }}
  {{ $s.Add "meta" (partial "hugo-seo/private/tags/twitter" . ) }}
{{ end }}

{{/* add json-ld code blocks */}}
{{ $s.Set "jsonld" slice }}

{{/* only display article for .json article types and not list pages, if enabled */}}
{{ if eq (.page.Param "seo.generate.jsonld.article") true }}
  {{ if and .jsonldType (not .page.IsNode) }}
    {{ $s.Add "jsonld" (partial "hugo-seo/private/tags/jsonld-article" .) }}
  {{ end }}
{{ end }}

{{ if eq (.page.Param "seo.generate.jsonld.breadcrumbs") true }}
  {{ $s.Add "jsonld" (partial "hugo-seo/private/tags/jsonld-breadcrumbs" .) }}
{{ end }}

{{/* merge additions
	----------------------------- */}}

{{ $params := $s.Get "params" }}

{{ if templates.Exists "partials/hugo-seo/AddTagData.html" }}
  {{ $params = partial "hugo-seo/AddSEOData" (dict "seo" $params "Page" $) }}
{{ end }}


{{ $s.SetInMap "tags" "jsonld" ($s.Get "jsonld") }}
{{ $s.SetInMap "tags" "meta" ($s.Get "meta") }}


{{ return $s.Get "tags" }}
  
